

# OSTB 架構介紹

期末項目，實現前後端分離。

## 框架

1. 前端使用的框架
  * vue.js
  * electron
  * bootstrap-vue
  * vueSocket.io
2. 後端
  * firebase
  * express
  * socket.io

## 功能

### 1. 登入： 👌
> 由前端發請求給後端，後端再請求 Firebase 做確認，確認無誤後登入。

### 2. 註冊： 👌
> 由前端發請求給後端，後端再請求 Firebase 做註冊，確認無誤後寫入資料。

### 3. 登出： 👌
> 由前端發請求給後端，後端清空該 socket 有關登入的所有資訊。

### 4. 創建房間： 👌
> 由前端發房間名字（使用者自訂）和使用者 uid 給後端後，後端使用 uid 作為資料庫路徑，往 Firebase 寫入房間資訊，再傳回該房間相關資訊到前端。

### 5. 獲取房間清單： 👌
> 由前端發請求，後端往 Firebase 調用後回傳。

### 6. 加入房間： 👌
> 由前端發使用者 uid 與房間 id 給後端後，後端將該資料往 Firebase 做檢索找到房間，並且使用使用者 uid 調用資料，寫入使用者資訊，再傳回該房間相關資訊到前端。

### 7. 離開房間： 👌
> 由前端發送使用者 uid 與判斷 創建 / 加入房間 所接受到的資訊，判斷有關自己的資訊後，將資料送到後端，後端再到 Firebase 刪除該資訊。

### 8. 進入遊戲：
> 由房主發出開始遊戲的請求，後端接收到之後往這個房間的所有人發送進入遊戲畫面的訊號。再由前端檢查房內所有人的路由是否已進戰鬥畫面，再回傳給後端做判斷。（若有人無法進入戰鬥畫面，將會強制終止遊戲。

### 9. 主持遊戲：
> 後端往 Firebase 紀錄遊戲戰況，有任何變更將立即推送至前端。(血量、手卡數、死亡狀態、身份...所有與遊戲有關的事情都會被記錄。）

### 10. 抽卡片：
> 前端判斷是否是自己的回合，若是的話將往後端發送抽卡請求，後端將再次確認，無誤隨機發送卡片資訊給前端。

### 11. 使用卡片：
> 前端發送卡片ＩＤ給後端，後端將使用結果推送給在房內的所有玩家。

### 12. 已死亡：
> 前端出現選項讓玩家決定是否回到大廳，或可繼續留下來觀戰，若選擇離開大廳，將發請求讓後端從房間移除該使用者。

### 13. 遊戲結束：
> 前端使用路由將玩家全部返回房間畫面，若離開一樣使用第七點提到的離開房間。

### 14. 遊戲內聊天：
>前端傳送使用者資訊、訊息內容給後端，後端發送給該房內所有使用者。

## 使用流程

### 登入

```flow
st=>start: 開始登入
op1=>operation: 輸入帳號密碼
cond=>condition: 正確?
e=>end: 已登入，進入主畫面
cond1=>condition: 已註冊?
sub1=>subroutine: 去註冊。
st->op1->cond
cond(yes)->e
cond(no)->cond1
cond1(yes)->op1
cond1(no)->sub1
```



